<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<title>Vitals</title>
<script type="text/javascript" src="fastclick.js"></script>
<script type="text/javascript">

/* parameters that should be changed */

var item_id_to_give = 42;

var min_pulse = 0;
var max_pulse = 100;

var min_resp_rate = 0;
var max_resp_rate = 100;

var min_blood_top = 0;
var max_blood_top = 100;

var min_blood_bottom = 0;
var max_blood_bottom = 100;

var min_temp = 0;
var max_temp = 100;

var min_oxygen = 0;
var max_oxygen = 100;

var message_success = "You did it!";
var message_failure = "Try again.";

/* end of parameters */

var ARIS = {};

function checkFloat(id, min, max) {
  var response = parseFloat( document.getElementById(id).value );
  return min <= response && response <= max;
}

function appReady() {
  FastClick.attach(document.body);
  document.getElementById('button-submit').onclick = function(){
    var passed = true;
    passed = passed && checkFloat('field-pulse'                , min_pulse       , max_pulse       );
    passed = passed && checkFloat('field-respiratory-rate'     , min_resp_rate   , max_resp_rate   );
    passed = passed && checkFloat('field-blood-pressure-top'   , min_blood_top   , max_blood_top   );
    passed = passed && checkFloat('field-blood-pressure-bottom', min_blood_bottom, max_blood_bottom);
    passed = passed && checkFloat('field-temperature'          , min_temp        , max_temp        );
    passed = passed && checkFloat('field-oxygen'               , min_oxygen      , max_oxygen      );

    if (passed) {
      ARIS.givePlayerItemCount(item_id_to_give, 1);
      alert(message_success);
      ARIS.exit();
    } else {
      alert(message_failure);
    }
  };
}

// hack to wait for both aris and the dom
var locks = 2;
function unlock() {
  locks--;
  if (locks == 0) appReady();
}
ARIS.ready = unlock;
document.addEventListener('DOMContentLoaded', unlock);

// for debugging
// ARIS.givePlayerItemCount = ARIS.exit = function(){};
// ARIS.ready();

</script>
<style type="text/css">

body {
  background-color: #335;
  color: white;
  font-family: sans-serif;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

input[type=number] {
  width: 7em;
}

</style>
</head>
<body>

<form>
  <p>
    <label>
      Pulse: <input id="field-pulse" type="number" value="0"> bpm
    </label>
  </p>
  <p>
    <label>
      Resp. rate: <input id="field-respiratory-rate" type="number" value="0"> / min
    </label>
  </p>
  <p>
    <label>
      Blood pressure: <input id="field-blood-pressure-top" type="number" value="0">
    </label> / <input id="field-blood-pressure-bottom" type="number" value="0">
  </p>
  <p>
    <label>
      Temperature: <input id="field-temperature" type="number" value="0"> &deg; C
    </label>
  </p>
  <p>
    <label>
      O<sup>2</sup>: <input id="field-oxygen" type="number" value="0"> %
    </label>
  </p>
  <p>
    <button id="button-submit" type="button">Submit</button>
  </p>
</form>

</body>
</html>
